# ref: https://github.com/yagihash/pwn/blob/master/Dockerfile
FROM ubuntu:bionic

ENV DEBIAN_FRONTEND=noninteractive

WORKDIR /root

RUN dpkg --add-architecture i386
RUN apt -y update && apt -y full-upgrade
RUN apt -y install ca-certificates
RUN apt -y install --no-install-recommends libc6:i386 libncurses5:i386 libstdc++6:i386 multiarch-support
RUN apt -y install --no-install-recommends build-essential gdb strace ltrace socat radare2
RUN apt -y install --no-install-recommends python3 python3-pip python3-dev libssl-dev libffi-dev
RUN apt -y install --no-install-recommends zsh vim git curl python wget less sudo tmux
RUN rm -rf /var/lib/apt/lists/*

# rp++
RUN wget https://github.com/0vercl0k/rp/releases/download/v1/rp-lin-x64 && \
    wget https://github.com/0vercl0k/rp/releases/download/v1/rp-lin-x86 && \
    chmod +x rp-lin-x64 rp-lin-x86 && \
    mv rp-lin-x64 rp-lin-x86 /bin

# checksec
RUN wget https://github.com/slimm609/checksec.sh/archive/1.6.tar.gz && \
    tar xzvf 1.6.tar.gz -O checksec.sh-1.6/checksec > /bin/checksec

# peda
RUN git clone https://github.com/longld/peda.git
RUN echo "source /root/peda/peda.py" >> ~/.gdbinit

ADD ./bin/ /root/

